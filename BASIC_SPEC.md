# お散歩ビンゴ - 基本仕様書

## 📋 コア機能（最優先・必須）

### 1. ビンゴボードの表示
**目的**: 5×5のビンゴマスを画面に表示する

**仕様**:
- 5×5 = 25マスのグリッド表示
- 中央マスは「FREE」（固定）
- 各マスにお題（テキスト）を表示
- レスポンシブ対応（スマホでも見やすい）

**データ**:
```javascript
board: ['信号', 'ネコ', '犬', ..., 'FREE', ..., '花']  // 25個
```

**必要な要素**:
- HTML: `<div id="bingoBoard"></div>`
- CSS: グリッドレイアウト
- JS: `renderBoard()` メソッド

---

### 2. マスのマーク機能
**目的**: 見つけたお題をマークする

**仕様**:
- マスをクリック → マークがつく（背景色が緑に変わる）
- もう一度クリック → マークが外れる
- FREEマスは最初からマーク済み、変更不可

**データ**:
```javascript
markedCells: Set([12])  // 12番目（FREE）は最初からマーク
```

**UI**:
- 未マーク: 白背景
- マーク済み: 緑背景 + ✓アイコン

---

### 3. ビンゴ判定
**目的**: 縦・横・斜めが揃ったら「ビンゴ！」と表示

**仕様**:
- 横5列、縦5列、斜め2列を自動チェック
- 揃ったら画面に「🎉 ○本のビンゴ達成！」と表示
- 複数ビンゴも対応

**判定タイミング**:
- マスをクリックするたび

**UI**:
- ビンゴメッセージエリア（画面中央下）

---

### 4. お題のシャッフル
**目的**: 毎回違うビンゴシートで遊べる

**仕様**:
- お題リスト（50個くらい）からランダムに24個選ぶ
- 中央はFREEで固定
- 「新しいゲーム」ボタンで再シャッフル

**お題例**:
```javascript
topics = [
  '信号', 'ネコ', '犬', '花', '木', '車', '自転車', 
  'バス', 'ベンチ', '看板', '自動販売機', 'ポスト',
  // ... 合計50個程度
]
```

---

### 5. リセット機能
**目的**: マークを全部消して、やり直せる

**仕様**:
- 「リセット」ボタン
- マークだけクリア（お題は変わらない）
- FREEマスは自動で再マーク

---

### 6. データの保存
**目的**: ページを閉じても続きから遊べる

**仕様**:
- LocalStorageに自動保存
- 保存内容:
  - ビンゴボード（お題の配置）
  - マーク状態
- ページ再読込み時に自動復元

---

## 🎯 追加機能（優先度：中）

### 7. 写真アップロード
**目的**: 見つけたお題の証拠写真を撮る

**仕様**:
- マスを長押し（または右クリック）→ 写真アップロード
- 写真を撮影/選択 → プレビュー → 保存
- 写真があるマスに📷マークを表示
- 写真は圧縮して保存（容量節約）

**トリガー**:
- 長押し（スマホ）
- 右クリック（PC）
- （オプション）クリック時に「写真を撮る？」と聞く

---

### 8. 統計表示
**目的**: 進捗を可視化

**仕様**:
- 画面上部に表示:
  - 📍 マーク数: ○/24
  - 📷 写真数: ○枚
  - 🎯 ビンゴ: ○本

---

### 9. 難易度設定
**目的**: 簡単/難しいお題を選べる

**仕様**:
- ゲーム開始時に選択
- かんたん: 見つけやすいお題（信号、車、ネコなど）
- ふつう: バランス型
- むずかしい: 見つけにくいお題も含む（海、山、虹など）

---

## 🌟 拡張機能（優先度：低・後回しOK）

### 10. 合言葉機能
**目的**: 友達と一緒に遊ぶ

**仕様**:
- 同じ合言葉を入力 → 同じお題プールから違うシートを生成
- 誰が先にビンゴするか競争

---

### 11. カスタムお題
**目的**: 自分で好きなお題を追加

**仕様**:
- 管理画面でお題を追加/削除
- 次のゲームから反映

---

### 12. エクスポート/インポート
**目的**: データのバックアップ

**仕様**:
- JSONファイルでエクスポート
- 別デバイスにインポート可能

---

### 13. シェア機能
**目的**: SNSで共有

**仕様**:
- ビンゴ画面をスクリーンショット
- 画像として保存/シェア

---

## 🎨 UI/UX要件

### レイアウト
```
┌─────────────────────────────┐
│  🚶 お散歩ビンゴ              │
│  散歩中に見つけたものを...    │
├─────────────────────────────┤
│  📍3 📷2 🎯1  ← 統計        │
├─────────────────────────────┤
│  ┌───┬───┬───┬───┬───┐     │
│  │信号│ネコ│ 犬│ 花│ 木│     │
│  ├───┼───┼───┼───┼───┤     │
│  │車 │自転│バス│公園│橋 │     │
│  ├───┼───┼───┼───┼───┤     │
│  │看板│ポス│FREE│滑台│雲 │     │
│  ├───┼───┼───┼───┼───┤     │
│  │太陽│虹 │蝶々│虫 │石 │     │
│  ├───┼───┼───┼───┼───┤     │
│  │階段│時計│傘 │帽子│靴 │     │
│  └───┴───┴───┴───┴───┘     │
├─────────────────────────────┤
│  [リセット] [新しいゲーム]    │
├─────────────────────────────┤
│  🎉 1本のビンゴ達成！         │
└─────────────────────────────┘
```

### 色使い
- 背景: 薄い緑（#e8f3ee）
- マス（未マーク）: 白
- マス（マーク済み）: 緑（#7eb89a）
- FREEマス: 薄い黄色（#eef4e8）

---

## 🔧 技術要件

### 必須
- HTML5
- CSS3（Grid Layout）
- Vanilla JavaScript（ES6+）

### データ構造
```javascript
{
  board: Array(25),           // お題の配置
  markedCells: Set,           // マーク済みマスのインデックス
  photos: Object,             // {index: base64Data}
  bingoLines: Array,          // 揃ったラインの配列
  difficulty: String,         // 'easy' | 'normal' | 'hard'
  roomCode: String | null     // 合言葉（オプション）
}
```

### LocalStorage
- キー: `osanpoBingo`
- 値: JSON文字列

---

## ✅ 実装チェックリスト（優先順）

### Phase 1: コア機能（これだけで遊べる）
- [ ] 1. ビンゴボードの表示
- [ ] 2. マスのマーク機能
- [ ] 3. ビンゴ判定
- [ ] 4. お題のシャッフル
- [ ] 5. リセット機能
- [ ] 6. データの保存

### Phase 2: 体験向上
- [ ] 7. 写真アップロード
- [ ] 8. 統計表示
- [ ] 9. 難易度設定

### Phase 3: 拡張機能
- [ ] 10. 合言葉機能
- [ ] 11. カスタムお題
- [ ] 12. エクスポート/インポート
- [ ] 13. シェア機能

---

## 🚫 やらないこと（スコープ外）

- サーバー/バックエンド（Phase 1では不要）
- リアルタイム同期
- ユーザー認証
- ランキング機能
- 位置情報の記録
- 複雑なアニメーション

---

## 🎯 ゴール

**Phase 1完了時点で**:
- ブラウザで開く → すぐにビンゴが始まる
- マスをクリック → マークがつく → ビンゴ判定が動く
- ページを閉じて開き直す → 続きから遊べる

**これだけで最低限遊べる状態 = MVP（Minimum Viable Product）**
