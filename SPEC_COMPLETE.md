# お散歩ビンゴ - 完全版基本仕様書

## 🎯 Web版の特徴（再確認）

Web版お散歩ビンゴの核心：
> **「溜まっていくポイントで自分のお散歩実績を実感」**

これが最も重要な特徴であり、現在の仕様に不足している部分です。

---

## 📋 完全版コア機能（優先順）

### Phase 1: 基本のビンゴゲーム

#### 1. ビンゴボードの表示 ✅
- 5×5マス、中央FREE
- お題を表示
- レスポンシブ

#### 2. マスのマーク機能 ✅
- クリックでマーク/解除
- 緑色に変化 + ✓

#### 3. ビンゴ判定 ✅
- 縦・横・斜めチェック
- メッセージ表示

#### 4. お題のシャッフル ✅
- ランダムに24個選択
- 新しいゲームで再生成

#### 5. リセット機能 ✅
- マークをクリア

#### 6. データの保存 ✅
- LocalStorageで自動保存

---

### Phase 2: 実績システム（Web版の核心）⭐⭐⭐

#### 7. ポイントシステム 🆕
**目的**: 「溜まっていくポイント」でモチベーション向上

**仕様**:
```javascript
// ポイント計算
マーク: 1ポイント
写真付きマーク: 3ポイント
ビンゴ1本: 10ポイント
全マス達成: ボーナス50ポイント
```

**データ構造**:
```javascript
{
  totalPoints: 0,        // 累計ポイント
  currentGamePoints: 0,  // 今回のゲームで獲得
  pointsHistory: []      // 獲得履歴
}
```

**UI**:
```
┌────────────────────────┐
│  💎 累計ポイント: 385  │
│  今回: +23ポイント     │
└────────────────────────┘
```

#### 8. 達成履歴 🆕
**目的**: 「お散歩実績を実感」できるようにする

**仕様**:
- 過去のゲーム記録を保存
- 日付ごとに整理
- 達成したお題を記録

**データ構造**:
```javascript
{
  history: [
    {
      id: 'game_20260210_001',
      date: '2026-02-10T15:30:00Z',
      bingoCount: 2,
      markedCount: 18,
      photoCount: 12,
      pointsEarned: 48,
      topics: ['信号', 'ネコ', ...],
      completedTopics: ['信号', 'ネコ', ...]
    }
  ],
  totalGames: 10,
  totalBingos: 23,
  totalPhotos: 156
}
```

**UI**:
```
📊 あなたの実績
├─ 総ゲーム数: 10回
├─ 総ビンゴ数: 23本
├─ 総写真数: 156枚
├─ 累計ポイント: 385pt
└─ 達成率: 78%

📅 履歴
├─ 2026-02-10: 2ビンゴ (+48pt)
├─ 2026-02-09: 1ビンゴ (+32pt)
└─ 2026-02-08: 3ビンゴ (+67pt)
```

#### 9. ビンゴ達成画面 🆕
**目的**: 達成の喜びを演出

**仕様**:
- ビンゴ達成時にフルスクリーンモーダル
- お祝いアニメーション（紙吹雪など）
- 獲得ポイント表示
- 次のアクション選択

**UI**:
```
┌──────────────────────────┐
│  🎉🎉🎉 ビンゴ達成！🎉🎉🎉│
│                          │
│  今回のビンゴ: 2本       │
│  獲得ポイント: +28pt     │
│  累計ポイント: 385pt     │
│                          │
│  [続ける] [新しいゲーム] │
└──────────────────────────┘
```

#### 10. 写真アップロード（改善版）
**Web版の特徴**: 写真を撮ることが中心

**仕様**:
- **パターンA**: 写真なしマーク可（初心者向け）
  - クリック → すぐマーク
  - 長押し → 写真追加
  
- **パターンB**: 写真必須マーク（本格派）
  - クリック → 写真モーダル → 保存 → マーク
  - 写真なしではマークできない

**モード選択**:
- ゲーム開始時に選択
- 「かんたんモード」（写真なし可）
- 「しっかりモード」（写真必須）

#### 11. 統計表示（改善版）
**現在**: マーク数、写真数、ビンゴ数

**改善後**:
- **現在のゲーム**: マーク数、写真数、ビンゴ数
- **累計**: 総ポイント、総ゲーム数、総ビンゴ数

---

### Phase 3: カスタマイズ・共有

#### 12. 季節/地域カテゴリ 🆕
**目的**: テーマに合わせて遊ぶ

**カテゴリ例**:
- 🌸 春の散歩
- ☀️ 夏の散歩
- 🍂 秋の散歩
- ⛄ 冬の散歩
- 🏙️ 街中
- 🌳 自然

#### 13. カスタムお題 ✅
（既存仕様のまま）

#### 14. エクスポート/インポート ✅
（既存仕様のまま）

#### 15. シェア機能（改善版）
**追加要素**:
- 達成率を画像に含める
- ポイントを画像に含める
- 日付を含める

---

## 🔢 データ構造（完全版）

```javascript
{
  // 現在のゲーム
  currentGame: {
    board: Array(25),
    markedCells: Set,
    photos: Object,
    bingoLines: Array,
    difficulty: String,
    category: String,
    roomCode: String | null,
    photoMode: 'optional' | 'required'
  },
  
  // 累計実績（重要！）
  stats: {
    totalPoints: 0,
    totalGames: 0,
    totalBingos: 0,
    totalPhotos: 0,
    totalMarks: 0
  },
  
  // 履歴（重要！）
  history: [
    {
      id: String,
      date: String,
      bingoCount: Number,
      pointsEarned: Number,
      topics: Array,
      completedTopics: Array
    }
  ],
  
  // カスタマイズ
  customTopics: Array,
  
  // ユーザー設定
  userId: String
}
```

---

## 📊 実装優先度マトリックス

| 機能 | Web版にある | 重要度 | 難易度 | 優先度 |
|------|-----------|--------|--------|--------|
| ビンゴボード | ✅ | 高 | 低 | ⭐⭐⭐ |
| マーク機能 | ✅ | 高 | 低 | ⭐⭐⭐ |
| ビンゴ判定 | ✅ | 高 | 中 | ⭐⭐⭐ |
| データ保存 | ✅ | 高 | 低 | ⭐⭐⭐ |
| **ポイントシステム** | **✅** | **高** | **中** | **⭐⭐⭐** |
| **達成履歴** | **✅** | **高** | **中** | **⭐⭐⭐** |
| 写真アップロード | ✅ | 高 | 中 | ⭐⭐ |
| **ビンゴ達成画面** | **✅** | **中** | **低** | **⭐⭐** |
| 統計表示 | ✅ | 中 | 低 | ⭐⭐ |
| カスタムお題 | ✅ | 中 | 低 | ⭐ |
| エクスポート/インポート | ✅ | 中 | 低 | ⭐ |
| シェア機能 | ✅ | 中 | 中 | ⭐ |
| **季節カテゴリ** | **✅** | **低** | **低** | **⭐** |
| 合言葉機能 | ❌ | 低 | 中 | - |
| 難易度設定 | ❌ | 低 | 低 | - |

**太字** = 現在の仕様に不足している機能

---

## 🚨 重要な発見

### 不足機能は6つ：

1. **ポイントシステム** - Web版の核心機能
2. **達成履歴** - 「実績を実感」するために必須
3. **ビンゴ達成画面** - 達成の演出
4. **写真モード選択** - 写真必須 or オプション
5. **季節/地域カテゴリ** - テーマ別お題
6. **進捗可視化** - プログレスバーなど

**特に1と2は最優先で実装すべき**
→ これがないと「お散歩実績を実感」できない

---

## 💡 次のステップ

### 推奨アプローチ
1. **まず Phase 1 を完璧に動かす**（シンプル版）
2. **Phase 2 でポイントと履歴を追加**（Web版の核心）
3. **Phase 3 で残りを追加**（拡張機能）

どうしますか？
