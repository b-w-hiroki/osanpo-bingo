# お散歩ビンゴ v3.0 - 完全版リリースノート

## 🎉 新機能（v2.0 → v3.0）

### 1. マスクリック時の写真アップロード促進 ✨
**Web版の特徴を再現**

- マスをクリックすると、まず写真アップロードを促すダイアログが表示
- 「写真を撮影」または「写真なしでマーク」を選択可能
- 写真優先のゲームプレイを実現

**使い方**:
1. マスをクリック
2. 「写真を撮影」→ カメラ起動 → 写真保存 → 自動マーク
3. または「写真なしでマーク」→ すぐにマーク

### 2. リアルタイム統計表示 📊
**ポイントシステムの実装**

ビンゴボードの上に常時表示:
- 📍 マーク数（FREEマスを除く）
- 📷 写真数
- 🎯 ビンゴ数

**動的更新**: マークや写真追加のたびに自動更新

### 3. カスタムお題機能 📝
**自分だけのお題を追加**

- 「カスタムお題」ボタンから管理画面を開く
- お題を追加・削除可能
- 次回の「新しいゲーム」から反映

**使用例**:
- 「ユニークな看板」
- 「変わった形の雲」
- 「季節の花」

### 4. エクスポート/インポート機能 💾
**データのバックアップと復元**

**エクスポート**:
- すべてのデータをJSONファイルで保存
- 写真も含めて完全バックアップ
- ファイル名: `osanpo-bingo-[タイムスタンプ].json`

**インポート**:
- JSONファイルから復元
- 別のデバイスへのデータ移行も可能

### 5. ビンゴ画面のシェア機能 📤
**SNSで成果を共有**

- 「シェア」ボタンでビンゴ画面をスクリーンショット
- SNS共有対応（対応ブラウザのみ）
- または画像として直接ダウンロード

**技術**:
- html2canvas ライブラリを使用
- 高解像度（2x）で生成

## 📋 Web版との機能比較

### ✅ 実装済み（Web版と同等以上）

- [x] お題の写真撮影
- [x] ポイント/統計表示
- [x] カスタムお題追加
- [x] エクスポート/インポート
- [x] ビンゴ画面シェア
- [x] PWA対応

### 🌟 オリジナル機能（Web版にない）

- [x] マルチプレイ（合言葉機能）
- [x] 難易度設定（3段階）
- [x] 完全なキーボード操作
- [x] 写真の自動圧縮
- [x] スクリーンリーダー対応
- [x] 写真なしマークオプション

## 🎮 新しい操作方法

### 基本操作
1. **マスをクリック**
   - 写真アップロードダイアログが表示
   - 「写真を撮影」または「写真なしでマーク」を選択

2. **写真を撮影**
   - カメラが起動
   - 撮影 → プレビュー → 保存
   - 自動的にマークされる

3. **統計を確認**
   - ビンゴボード上部に常時表示
   - マーク数、写真数、ビンゴ数を一目で確認

### 管理機能

**カスタムお題**:
- 「📝 カスタムお題」ボタン → お題を入力 → 追加
- 削除する場合は各お題の「削除」ボタン

**データ管理**:
- 「💾 エクスポート」: データを保存
- 「📥 インポート」: ファイルを選択して復元

**シェア**:
- 「📤 シェア」: ビンゴ画面を画像として保存・共有

## 🔧 技術的な改善

### 新規追加ライブラリ
- **html2canvas**: ビンゴ画面のスクリーンショット生成

### コードの改善
- `handleCellClick`: 写真促進ロジックを追加
- `showPhotoPrompt`: 新しいダイアログ処理
- `updateStats`: リアルタイム統計更新
- `exportData/importData`: データのバックアップ機能
- `shareBoard`: スクリーンショット生成とシェア
- `addCustomTopic/removeCustomTopic`: お題管理

### UI/UX改善
- 統計表示エリアの追加
- セカンダリコントロールバー
- カスタムお題管理モーダル
- 写真促進ダイアログ
- レスポンシブ対応の強化

## 📊 パフォーマンス

- **初期ロード**: <1秒
- **写真圧縮**: 即座（800pxリサイズ）
- **LocalStorage使用量**: 最適化済み
- **スクリーンショット生成**: 1-2秒

## 🐛 バグ修正

- 写真なしでもマークできない問題を修正
- 統計が更新されない問題を修正
- カスタムお題が保存されない問題を修正
- エクスポート時の写真データ欠落を修正

## 📱 対応環境

- Chrome 90+ (推奨)
- Firefox 88+
- Safari 14+
- Edge 90+

## 🚀 今後の予定（v4.0）

- [ ] 複数シートの管理（プロジェクト機能）
- [ ] 達成履歴の可視化（グラフ）
- [ ] お題の難易度タグ
- [ ] 位置情報の記録（オプション）
- [ ] リアルタイムマルチプレイ（WebSocket）

---

**バージョン**: 3.0  
**リリース日**: 2026年2月  
**互換性**: v2.0からの自動アップグレード対応
